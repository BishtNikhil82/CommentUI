(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{161:function(e,t,r){Promise.resolve().then(r.bind(r,2791))},2791:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return U}});var s=r(7437),l=r(2265),a=r(6648),n=r(2022),i=r(9896),o=r(1538),d=r(3027),c=r(9354);let u=(0,d.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),m=l.forwardRef((e,t)=>{let{className:r,variant:l,size:a,asChild:n=!1,...i}=e,d=n?o.g7:"button";return(0,s.jsx)(d,{className:(0,c.cn)(u({variant:l,size:a,className:r})),ref:t,...i})});m.displayName="Button";var x=r(7776);function h(e){let{user:t}=e,[r,o]=(0,l.useState)(!1),d=async()=>{try{o(!0),window.location.href="/auth/logout"}catch(e){x.Am.error("Failed to sign out")}finally{o(!1)}};return(0,s.jsx)("header",{className:"bg-gradient-to-r from-gray-900 via-purple-900 to-violet-800 border-b border-white/10 sticky top-0 z-10",children:(0,s.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,s.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsx)("h1",{className:"text-xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-400",children:"YouTube Analytics"})}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3 bg-white/10 backdrop-blur-sm rounded-full py-1.5 px-3 border border-white/20",children:[(null==t?void 0:t.picture)?(0,s.jsx)(a.default,{src:t.picture,alt:"Profile",width:32,height:32,className:"rounded-full ring-2 ring-purple-400/30"}):(0,s.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center",children:(0,s.jsx)(n.Z,{className:"w-4 h-4 text-white"})}),(0,s.jsx)("span",{className:"text-sm font-medium text-white hidden sm:block",children:(null==t?void 0:t.name)||(null==t?void 0:t.email)})]}),(0,s.jsxs)(m,{variant:"ghost",size:"sm",onClick:d,disabled:r,className:"text-purple-200 hover:text-white hover:bg-white/10 rounded-full",children:[(0,s.jsx)(i.Z,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"ml-1 hidden sm:block",children:"Sign out"})]})]})]})})})}var p=r(4817);let f=l.forwardRef((e,t)=>{let{className:r,type:l,...a}=e;return(0,s.jsx)("input",{type:l,className:(0,c.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...a})});f.displayName="Input";var b=r(6836);function g(e){let{onSearch:t,loading:r=!1,placeholder:a="Search for YouTube topic analysis..."}=e,[n,i]=(0,l.useState)("");return console.log("SEARCHBAR: render",{query:n,loading:r}),(0,s.jsx)("form",{onSubmit:e=>{e.preventDefault(),console.log("SEARCHBAR: handleSubmit",{query:n,loading:r}),n.trim()&&!r&&t(n.trim())},className:"w-full max-w-2xl mx-auto",children:(0,s.jsxs)("div",{className:"flex items-center overflow-hidden rounded-xl bg-white/10 backdrop-blur-sm border border-white/20 hover:border-purple-400/30 transition-all duration-300 focus-within:border-purple-400/50 focus-within:ring-2 focus-within:ring-purple-400/20",children:[(0,s.jsxs)("div",{className:"relative flex-1",children:[(0,s.jsx)(f,{type:"text",value:n,onChange:e=>{i(e.target.value),console.log("SEARCHBAR: onChange",e.target.value)},placeholder:a,className:"w-full pl-10 pr-4 py-3 text-lg border-0 rounded-none focus:ring-0 focus:outline-none bg-transparent text-white placeholder:text-purple-200/60",disabled:r}),(0,s.jsx)(p.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-purple-300 w-5 h-5"})]}),(0,s.jsx)(m,{type:"submit",disabled:!n.trim()||r,className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 text-white rounded-none border-0 min-w-[100px] h-[52px] flex items-center justify-center transition-all duration-300 shadow-lg",children:r?(0,s.jsx)(b.T,{size:"sm",className:"border-t-white"}):"Search"})]})})}console.log("SEARCHBAR: file loaded");var j=r(933),v=r(4697);function w(e){let{onSearch:t}=e,[r,a]=(0,l.useState)([]);(0,l.useEffect)(()=>{let e=localStorage.getItem("youtube-search-history");e&&a(JSON.parse(e))},[]);let n=e=>{let t=[e,...r.filter(t=>t!==e)].slice(0,5);a(t),localStorage.setItem("youtube-search-history",JSON.stringify(t))},i=e=>{let t=r.filter(t=>t!==e);a(t),localStorage.setItem("youtube-search-history",JSON.stringify(t))};return 0===r.length?null:(0,s.jsxs)("div",{className:"w-full max-w-2xl mx-auto mt-4 bg-white/5 backdrop-blur-md rounded-xl p-4 border border-white/10 shadow-lg",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,s.jsxs)("h3",{className:"text-sm font-medium text-white flex items-center",children:[(0,s.jsx)(j.Z,{className:"w-4 h-4 mr-1.5 text-purple-400"}),"Recent searches"]}),(0,s.jsx)(m,{variant:"ghost",size:"sm",onClick:()=>{a([]),localStorage.removeItem("youtube-search-history")},className:"text-xs text-purple-300 hover:text-white hover:bg-white/10 rounded-full px-3 py-1",children:"Clear all"})]}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:r.map((e,r)=>(0,s.jsxs)("div",{className:"flex items-center bg-white/10 hover:bg-white/15 border border-white/10 hover:border-purple-400/30 rounded-full px-3 py-1.5 text-sm transition-all duration-200",children:[(0,s.jsx)("button",{onClick:()=>{t(e),n(e)},className:"flex-1 text-left text-white",children:e}),(0,s.jsx)("button",{onClick:()=>i(e),className:"ml-2 text-purple-300 hover:text-white",children:(0,s.jsx)(v.Z,{className:"w-3 h-3"})})]},r))})]})}var N=r(2421),y=r(5636),k=r(3722),C=r(7151),A=r(3787),S=r(1942),D=r(7213);let R=e=>{let{shouldScaleBackground:t=!0,...r}=e;return(0,s.jsx)(D.dy.Root,{shouldScaleBackground:t,...r})};R.displayName="Drawer";let I=D.dy.Trigger,T=D.dy.Portal,z=D.dy.Close,E=l.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,s.jsx)(D.dy.Overlay,{ref:t,className:(0,c.cn)("fixed inset-0 z-50 bg-black/80",r),...l})});E.displayName=D.dy.Overlay.displayName;let O=l.forwardRef((e,t)=>{let{className:r,children:l,...a}=e;return(0,s.jsxs)(T,{children:[(0,s.jsx)(E,{}),(0,s.jsxs)(D.dy.Content,{ref:t,className:(0,c.cn)("fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background",r),...a,children:[(0,s.jsx)("div",{className:"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted"}),l]})]})});O.displayName="DrawerContent";let Y=e=>{let{className:t,...r}=e;return(0,s.jsx)("div",{className:(0,c.cn)("grid gap-1.5 p-4 text-center sm:text-left",t),...r})};Y.displayName="DrawerHeader";let _=l.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,s.jsx)(D.dy.Title,{ref:t,className:(0,c.cn)("text-lg font-semibold leading-none tracking-tight",r),...l})});function B(e){let{video:t,onTopicClick:r}=e,[n,i]=(0,l.useState)(!1),o=(0,l.useRef)(null);return(0,s.jsxs)(R,{open:n,onOpenChange:i,children:[(0,s.jsx)("div",{ref:o,className:"bg-white/5 backdrop-blur-md rounded-xl border overflow-hidden transition-all duration-300 border-white/10 hover:border-white/20 hover:shadow-lg",tabIndex:0,onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&(e.preventDefault(),i(!0))},children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("div",{className:"aspect-video relative",children:[(0,s.jsx)(a.default,{src:t.thumbnail,alt:t.title,fill:!0,className:"object-cover",sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"}),(0,s.jsx)("div",{className:"absolute bottom-2 right-2 bg-black/75 text-white text-xs px-2 py-0.5 rounded-md backdrop-blur-sm border border-white/10",children:t.duration})]}),(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)("h3",{className:"font-semibold text-white mb-2 line-clamp-2",children:(0,c.aF)(t.title,80)}),(0,s.jsx)("div",{className:"flex items-center text-sm text-purple-200 mb-2",children:(0,s.jsx)("span",{className:"font-medium",children:t.channelName})}),(0,s.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-300",children:[(0,s.jsx)("span",{className:"bg-white/10 px-2 py-0.5 rounded-full",children:(0,c.YO)(t.viewCount)}),(0,s.jsx)("span",{className:"bg-white/10 px-2 py-0.5 rounded-full",children:(0,c.h$)(t.uploadDate)})]}),(0,s.jsx)(I,{asChild:!0,children:(0,s.jsxs)(m,{variant:"ghost",size:"sm",className:"w-full mt-3 flex items-center justify-center text-purple-200 hover:text-white bg-white/5 hover:bg-white/10 border border-white/10 hover:border-purple-400/30 rounded-lg transition-all duration-200",onClick:()=>i(!0),children:[(0,s.jsx)(N.Z,{className:"w-4 h-4 mr-1.5 text-purple-400"}),"Show Analytics"]})})]})]})}),(0,s.jsxs)(O,{className:"max-w-lg w-full right-0 left-auto ml-auto rounded-t-2xl md:rounded-l-2xl md:rounded-t-none md:fixed md:inset-y-0 md:right-0 md:w-[400px] bg-white/10 border border-white/20 shadow-2xl",children:[(0,s.jsxs)(Y,{children:[(0,s.jsx)(_,{className:"text-white",children:"Video Analytics"}),(0,s.jsxs)("div",{className:"mt-2 flex items-center text-red-400 text-sm font-semibold truncate",children:[(0,s.jsx)(S.V2E,{className:"w-4 h-4 mr-1"}),(0,s.jsx)("span",{children:t.channelName})]}),(0,s.jsx)("div",{className:"text-white text-lg font-extrabold mb-2 truncate",children:t.title}),(0,s.jsx)(z,{asChild:!0,children:(0,s.jsx)(m,{variant:"ghost",size:"sm",className:"absolute top-4 right-4 text-white/70 hover:text-white",children:"Close"})})]}),(0,s.jsxs)("div",{className:"p-4 space-y-4 overflow-y-auto max-h-[70vh]",children:[t.pros&&t.pros.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("h4",{className:"flex items-center font-semibold text-green-400 mb-2",children:[(0,s.jsx)(y.Z,{className:"w-4 h-4 mr-2"}),"Pros"]}),(0,s.jsx)("ul",{className:"space-y-1",children:t.pros.map((e,t)=>(0,s.jsxs)("li",{className:"flex items-start text-sm text-gray-200",children:[(0,s.jsx)("span",{className:"w-2 h-2 bg-green-400 rounded-full mt-2 mr-2 flex-shrink-0"}),e]},t))})]}),t.cons&&t.cons.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("h4",{className:"flex items-center font-semibold text-red-400 mb-2",children:[(0,s.jsx)(k.Z,{className:"w-4 h-4 mr-2"}),"Cons"]}),(0,s.jsx)("ul",{className:"space-y-1",children:t.cons.map((e,t)=>(0,s.jsxs)("li",{className:"flex items-start text-sm text-gray-200",children:[(0,s.jsx)("span",{className:"w-2 h-2 bg-red-400 rounded-full mt-2 mr-2 flex-shrink-0"}),e]},t))})]}),t.nextTopicIdeas&&t.nextTopicIdeas.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("h4",{className:"flex items-center font-semibold text-blue-400 mb-2",children:[(0,s.jsx)(C.Z,{className:"w-4 h-4 mr-2"}),"Next Big Spark"]}),(0,s.jsx)("ul",{className:"space-y-1",children:t.nextTopicIdeas.map((e,t)=>(0,s.jsxs)("li",{className:"flex items-start text-sm text-blue-200",children:[(0,s.jsx)("span",{className:"w-2 h-2 bg-blue-400 rounded-full mt-2 mr-2 flex-shrink-0"}),e]},t))})]}),(0,s.jsx)("div",{className:"pt-2 border-t border-white/10",children:(0,s.jsxs)("a",{href:"https://youtube.com/watch?v=".concat(t.id),target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center text-sm text-red-400 hover:text-red-300 font-medium transition-colors",children:[(0,s.jsx)(A.Z,{className:"w-4 h-4 mr-1.5"}),"Watch on YouTube"]})})]})]})]})}function F(e){let{videos:t,onTopicClick:r}=e;return 0===t.length?null:(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 p-4",children:t.map(e=>(0,s.jsx)("div",{className:"transform transition-all duration-300 hover:scale-[1.02] hover:-translate-y-1",children:(0,s.jsx)(B,{video:e,onTopicClick:r})},e.id))})}function M(e){let{message:t,count:r}=e;return(0,s.jsx)("div",{className:"flex flex-col items-center justify-center py-12",children:(0,s.jsx)("div",{className:"bg-white/5 backdrop-blur-md rounded-xl p-8 border border-white/10 shadow-lg max-w-md w-full",children:(0,s.jsxs)("div",{className:"flex flex-col items-center",children:[(0,s.jsx)("div",{className:"w-16 h-16 rounded-full bg-purple-500/20 flex items-center justify-center mb-4",children:(0,s.jsx)(b.T,{size:"lg",className:"border-t-purple-400"})}),(0,s.jsx)("p",{className:"text-xl font-medium text-white mb-3",children:t}),void 0!==r&&(0,s.jsxs)("div",{className:"bg-white/10 rounded-full px-4 py-1.5 text-purple-200 border border-white/20",children:["Found ",(0,s.jsx)("span",{className:"font-semibold text-white",children:r})," video",1!==r?"s":""," so far..."]})]})})})}_.displayName=D.dy.Title.displayName,l.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,s.jsx)(D.dy.Description,{ref:t,className:(0,c.cn)("text-sm text-muted-foreground",r),...l})}).displayName=D.dy.Description.displayName;let H=l.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,s.jsx)("div",{ref:t,className:(0,c.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...l})});H.displayName="Card";let J=l.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,s.jsx)("div",{ref:t,className:(0,c.cn)("flex flex-col space-y-1.5 p-6",r),...l})});J.displayName="CardHeader";let Z=l.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,s.jsx)("h3",{ref:t,className:(0,c.cn)("text-2xl font-semibold leading-none tracking-tight",r),...l})});Z.displayName="CardTitle";let W=l.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,s.jsx)("p",{ref:t,className:(0,c.cn)("text-sm text-muted-foreground",r),...l})});W.displayName="CardDescription";let L=l.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,s.jsx)("div",{ref:t,className:(0,c.cn)("p-6 pt-0",r),...l})});L.displayName="CardContent",l.forwardRef((e,t)=>{let{className:r,...l}=e;return(0,s.jsx)("div",{ref:t,className:(0,c.cn)("flex items-center p-6 pt-0",r),...l})}).displayName="CardFooter";var P=r(8484);let q=l.forwardRef((e,t)=>{let{className:r,orientation:l="horizontal",decorative:a=!0,...n}=e;return(0,s.jsx)(P.f,{ref:t,decorative:a,orientation:l,className:(0,c.cn)("shrink-0 bg-border","horizontal"===l?"h-[1px] w-full":"h-full w-[1px]",r),...n})});q.displayName=P.f.displayName;var V=r(2857);function X(){let[e,t]=(0,l.useState)(!1),r=async()=>{try{t(!0),window.location.href="/auth/login"}catch(e){x.Am.error(e instanceof Error?e.message:"Failed to sign in")}finally{t(!1)}},a=e=>{let{icon:t,title:r,desc:l,hoverColor:a}=e;return(0,s.jsxs)("div",{className:"text-center p-4 rounded-lg transition-all duration-300 hover:bg-white/5 hover:scale-105 border border-transparent hover:border-".concat(a,"-500/30"),children:[(0,s.jsx)("div",{className:"mb-3",children:t}),(0,s.jsx)("h3",{className:"font-semibold text-white mb-2",children:r}),(0,s.jsx)("p",{className:"text-sm text-gray-300",children:l})]})};return(0,s.jsx)("main",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-900 via-purple-900 to-violet-800 p-4",children:(0,s.jsxs)(H,{className:"w-full max-w-4xl bg-white/10 backdrop-blur-md border-white/20 shadow-2xl",children:[(0,s.jsxs)(J,{className:"text-center pb-8",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center mb-4",children:[(0,s.jsx)(S.V2E,{className:"text-red-500 text-4xl mr-3"}),(0,s.jsxs)("div",{children:[(0,s.jsx)(Z,{className:"text-3xl font-bold text-white",children:"YouTube Analytics"}),(0,s.jsx)(W,{className:"text-purple-200",children:"Powered by AI Insights"})]})]}),(0,s.jsx)("p",{className:"text-lg text-purple-100 max-w-2xl mx-auto",children:"Unlock powerful insights from YouTube content. Analyze videos, discover trends, and get AI-powered recommendations to grow your channel."})]}),(0,s.jsxs)(L,{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsxs)(m,{onClick:r,disabled:e,className:"w-full max-w-md bg-white text-gray-900 hover:bg-gray-100 font-semibold py-3 px-6 rounded-xl transition-all duration-300 shadow-lg hover:shadow-xl",children:[e?(0,s.jsx)(b.T,{size:"sm",className:"mr-2"}):(0,s.jsx)(V.JM8,{className:"text-xl mr-2"}),e?"Signing in...":"Continue with Google"]}),(0,s.jsx)("p",{className:"text-xs text-gray-400 mt-3",children:"We'll request access to your YouTube data for analysis"})]}),(0,s.jsx)(q,{className:"bg-white/20"}),(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)("h3",{className:"text-xl font-semibold text-white mb-6",children:"What you'll get access to:"})}),(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mt-6",children:[(0,s.jsx)(a,{icon:(0,s.jsx)(S.NMh,{className:"text-purple-400 text-xl"}),title:"Content Analysis",desc:"Deep dive into video metrics & engagement.",hoverColor:"purple"}),(0,s.jsx)(a,{icon:(0,s.jsx)(S.U41,{className:"text-blue-400 text-xl"}),title:"Competitor Insights",desc:"Monitor strategies from top channels.",hoverColor:"blue"}),(0,s.jsx)(a,{icon:(0,s.jsx)(S.iNY,{className:"text-green-400 text-xl"}),title:"Growth Tips",desc:"AI-based suggestions for faster growth.",hoverColor:"green"})]}),(0,s.jsx)("p",{className:"text-center text-xs text-gray-400 mt-8",children:"\xa9 2025 YouTube Analytics by YourCompany. All rights reserved."})]})]})})}let G=(0,r(3435).createBrowserClient)("https://qopbjuixcnrjyibiotko.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFvcGJqdWl4Y25yanlpYmlvdGtvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTMxNzk2NzEsImV4cCI6MjA2ODc1NTY3MX0.riXsWN0WueR4Dcelss00dHR75KIVHXblkIzmvbnhtuE");function U(){let{user:e,loading:t}=function(){let[e,t]=(0,l.useState)(null),[r,s]=(0,l.useState)(!0);return(0,l.useEffect)(()=>{(async()=>{console.log("\uD83D\uDD0D useAuth: Checking authentication...");try{let e=await fetch("/api/auth/me",{credentials:"include"});if(console.log("\uD83D\uDD0D useAuth: Response status:",e.status),e.ok){let r=await e.json();console.log("✅ useAuth: User authenticated:",{id:r.user.id,email:r.user.email,name:r.user.name}),t(r.user)}else console.log("❌ useAuth: Not authenticated"),t(null)}catch(e){console.error("❌ useAuth: Error checking auth:",e),t(null)}finally{s(!1),console.log("\uD83D\uDD0D useAuth: Auth check complete, loading:",!1)}})()},[]),{user:e,loading:r}}(),[r,a]=(0,l.useState)({query:"",loading:!1,videos:[],error:null,totalFound:0,isComplete:!1});console.log("DASHBOARD: render",{user:e,authLoading:t,searchState:r});let n=(0,l.useRef)(null),i=(0,l.useRef)(null);(0,l.useEffect)(()=>(console.log("DASHBOARD: useEffect cleanup"),()=>{n.current&&(n.current.unsubscribe(),n.current=null)}),[]);let o=(0,l.useCallback)(async t=>{if(console.log("DASHBOARD: handleSearch called",{query:t,user:e}),!e){x.Am.error("Please sign in to search");return}n.current&&(n.current.unsubscribe(),n.current=null),i.current=null,a(e=>({...e,query:t,loading:!0,videos:[],error:null,totalFound:0,isComplete:!1}));try{let e=await fetch("/api/analytics",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({query:t})});if(console.log("DASHBOARD: /api/analytics response",e.status),!e.ok){let t=await e.json();throw Error(t.error||"Failed to fetch analytics")}let{job_id:r}=await e.json();if(!r)throw Error("No job_id returned from API");i.current=r;let s=G.channel("job_results_"+r).on("postgres_changes",{event:"INSERT",schema:"public",table:"job_results",filter:"job_id=eq.".concat(r)},e=>{let t=e.new;a(e=>e.videos.some(e=>e.id===t.video_id)?e:{...e,videos:[...e.videos,function(e){let t=e=>Array.isArray(e)?e:"string"==typeof e?e.trim().startsWith("[")?r(e):[e]:[],r=e=>{try{let t=JSON.parse(e);return Array.isArray(t)?t:[e]}catch(t){return[e]}};return{id:e.video_id,title:e.video_title,channelName:e.channel_title,thumbnail:e.thumbnail_url,pros:t(e.pros),cons:t(e.cons),nextTopicIdeas:t(e.summary),duration:e.duration,viewCount:e.view_count,uploadDate:e.upload_date}}(t)],totalFound:e.totalFound+1})}).subscribe(e=>{});n.current=s}catch(t){console.error("DASHBOARD: Search error",t);let e=t instanceof Error?t.message:"An unexpected error occurred";a(t=>({...t,loading:!1,error:e})),x.Am.error(e)}},[e]);(0,l.useEffect)(()=>{r.loading&&r.videos.length>0&&a(e=>({...e,loading:!1,isComplete:!0}))},[r.loading,r.videos.length]);let d=(0,l.useCallback)(e=>{o(e)},[o]);return t?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsx)(b.T,{size:"lg"})}):e?(console.log("DASHBOARD: return render",{user:e,authLoading:t,searchState:r}),(0,s.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-violet-800",children:[(0,s.jsx)(h,{user:e}),(0,s.jsxs)("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,s.jsxs)("div",{className:"text-center mb-12",children:[(0,s.jsx)("div",{className:"inline-block px-3 py-1 rounded-full bg-purple-500/20 backdrop-blur-sm border border-purple-500/30 text-purple-200 text-sm font-medium mb-4",children:"Powerful Analytics"}),(0,s.jsxs)("h2",{className:"text-4xl md:text-5xl font-extrabold text-white mb-4",children:["Discover ",(0,s.jsx)("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-400",children:"YouTube"})," Content Insights"]}),(0,s.jsx)("p",{className:"text-xl text-purple-100/80 mb-10 max-w-2xl mx-auto",children:"Search for any topic and get detailed analysis of relevant YouTube videos"}),(0,s.jsxs)("div",{className:"max-w-2xl mx-auto bg-white/5 backdrop-blur-md rounded-2xl p-6 border border-white/10 shadow-xl",children:[(0,s.jsx)(g,{onSearch:o,loading:r.loading}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)(w,{onSearch:o})})]})]}),r.loading&&(0,s.jsx)("div",{className:"mt-12",children:(0,s.jsx)(M,{message:"Analyzing videos...",count:r.totalFound})}),r.error&&(0,s.jsx)("div",{className:"text-center py-12",children:(0,s.jsxs)("div",{className:"bg-white/5 backdrop-blur-md border border-red-500/30 rounded-xl p-6 max-w-md mx-auto shadow-lg",children:[(0,s.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-red-500/20 flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-8 h-8 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),(0,s.jsx)("h3",{className:"text-xl font-semibold text-white mb-2",children:"Search Error"}),(0,s.jsx)("p",{className:"text-red-300 mb-6",children:r.error}),(0,s.jsx)("button",{onClick:()=>o(r.query),className:"bg-gradient-to-r from-red-600 to-red-500 text-white px-6 py-2 rounded-xl hover:from-red-500 hover:to-red-400 transition-all duration-300 shadow-lg",children:"Try Again"})]})}),r.videos.length>0&&(0,s.jsxs)("div",{className:"space-y-8 mt-12",children:[(0,s.jsxs)("div",{className:"bg-white/5 backdrop-blur-md rounded-xl p-4 flex flex-col md:flex-row md:items-center justify-between border border-white/10",children:[(0,s.jsxs)("h3",{className:"text-xl font-semibold text-white mb-2 md:mb-0",children:["Analysis Results for ",(0,s.jsx)("span",{className:"text-transparent bg-clip-text bg-gradient-to-r from-purple-400 to-pink-400",children:r.query})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 bg-white/10 rounded-full px-4 py-1.5 text-purple-200 border border-white/20",children:[(0,s.jsxs)("span",{className:"flex items-center",children:[(0,s.jsxs)("svg",{className:"w-4 h-4 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),r.totalFound," video",1!==r.totalFound?"s":""]}),!r.isComplete&&(0,s.jsxs)("span",{className:"flex items-center",children:[(0,s.jsx)(b.T,{size:"sm",className:"mr-1"}),"loading more..."]})]})]}),(0,s.jsx)(F,{videos:r.videos,onTopicClick:d})]}),!r.loading&&0===r.videos.length&&!r.error&&(0,s.jsx)("div",{className:"text-center py-16",children:(0,s.jsxs)("div",{className:"max-w-md mx-auto bg-white/5 backdrop-blur-md rounded-xl p-8 border border-white/10 shadow-lg",children:[(0,s.jsx)("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-purple-500/20 flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-8 h-8 text-purple-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),(0,s.jsx)("h3",{className:"text-xl font-semibold text-white mb-2",children:"Ready to analyze YouTube content?"}),(0,s.jsx)("p",{className:"text-purple-200/80",children:"Enter a topic above to discover insights from relevant YouTube videos."})]})})]})]})):(0,s.jsx)(X,{})}console.log("DASHBOARD: file loaded")},6836:function(e,t,r){"use strict";r.d(t,{T:function(){return n}});var s=r(7437),l=r(9354),a=r(3274);function n(e){let{size:t="md",text:r,className:n}=e;return(0,s.jsxs)("div",{className:(0,l.cn)("flex flex-col items-center justify-center",n),children:[(0,s.jsx)(a.Z,{className:(0,l.cn)("animate-spin",{sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8"}[t])}),r&&(0,s.jsx)("p",{className:"mt-2 text-sm text-muted-foreground",children:r})]})}},9354:function(e,t,r){"use strict";r.d(t,{YO:function(){return n},aF:function(){return o},cn:function(){return a},h$:function(){return i}});var s=r(4839),l=r(6164);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,l.m6)((0,s.W)(t))}function n(e){let t=parseInt(e);return t>=1e6?"".concat((t/1e6).toFixed(1),"M views"):t>=1e3?"".concat((t/1e3).toFixed(1),"K views"):"".concat(t," views")}function i(e){let t=new Date(e),r=Math.ceil(Math.abs(new Date().getTime()-t.getTime())/864e5);return 1===r?"1 day ago":r<7?"".concat(r," days ago"):r<30?"".concat(Math.floor(r/7)," weeks ago"):r<365?"".concat(Math.floor(r/30)," months ago"):"".concat(Math.floor(r/365)," years ago")}function o(e,t){return e.length<=t?e:e.slice(0,t)+"..."}}},function(e){e.O(0,[699,680,714,876,609,971,23,744],function(){return e(e.s=161)}),_N_E=e.O()}]);